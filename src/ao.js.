import * as dotenv from "dotenv"
dotenv.config()

import express from "express"

const app = express()
const PORT = process.env.PORT || 10000

// health endpoint voor Render
app.get("/", (_, res) => {
  res.send("AO MASTER BUILDER LIVE")
})

app.get("/ping", (_, res) => {
  res.json({ ok: true, role: "ao-master-builder" })
})

// JOUW bestaande logic
import { startGptInterface } from "./core/gptInterface.js"
import { startSystemArchitect } from "./core/systemArchitect.js"
import { startMasterBuilder } from "./core/masterBuilder.js"

const role = process.env.AO_ROLE
console.log("AO gestart met rol:", role)

if (role === "ao-gpt-interface") startGptInterface()
if (role === "ao-system-architect") startSystemArchitect()
if (role === "ao-master-builder") startMasterBuilder()

// DIT IS DE SLEUTEL
app.listen(PORT, () => {
  console.log("AO Master Builder luistert op poort", PORT)
})
